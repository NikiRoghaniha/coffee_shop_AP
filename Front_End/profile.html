<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>User Profile</title>
    <!-- Add any necessary CSS stylesheets -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link rel="stylesheet" href="css/profile_styles.css" />
    <link rel="stylesheet" href="css/styles.css" />
  </head>

  <body>
    <header class="header">
      <nav class="navbar">
        <div class="navbar-left">
          <a href="#menu" class="nav-item menu" onclick="myFunction()"
            ><i class="fa fa-bars"></i> Menu</a
          >
          <div class="dropdown" id="menu-dropdown">
            <a
              href="product_page.html"
              class="dropdown-item"
              onclick="selectedCategory(1)"
              >Coffee</a
            >
            <a
              href="product_page.html"
              class="dropdown-item"
              onclick="selectedCategory(2)"
              >Tea</a
            >
            <a
              href="product_page.html"
              class="dropdown-item"
              onclick="selectedCategory(3)"
              >Pastries</a
            >
            <a
              href="product_page.html"
              class="dropdown-item"
              onclick="selectedCategory(4)"
              >Snacks</a
            >
          </div>
          <a href="#records" class="nav-item" id="item2"
            ><i class="fas fa-receipt"></i> Shopping Records</a
          >
          <a href="#cart" class="nav-item" id="item3"
            ><i class="fas fa-shopping-cart"></i> Shopping Cart</a
          >
          <a href="index.html" class="nav-item" id="logout-button">
            <i class="fas fa-sign-out"></i> Log out</a
          >
        </div>
        <div class="navbar-right">
          <a href="#" class="logo"> <i class="fas fa-mug-hot"></i> coffee</a>
        </div>
      </nav>
    </header>
    <script>
      if (!localStorage.getItem("Authorization")) {
        window.location.href = "/index.html";
      }
      let loginLink = document.getElementById("logout-button");
      l;
      loginLink.addEventListener("click", (e) => {
        localStorage.removeItem("Authorization");
      });

      const myHeaders = new Headers();
      myHeaders.append("Authorization", localStorage.getItem("Authorization"));
      const requestOptions = {
        method: "GET",
        headers: myHeaders,
        redirect: "follow",
      };
      fetch("http://127.0.0.1:8000/api/profile/", requestOptions)
        .then((response) => {
          if (!response.ok) {
            throw new Error("Network response was not ok");
          }
          return response.json();
        })
        .then((data) => {
          console.log(data);
        })
        .catch((error) => {
          console.error(
            "There has been a problem with your fetch operation:",
            error
          );
          alert("Invalid credentials. Please try again.");
        });
    </script>

    <header>
      <div class="header-content">
        <h1>User Profile</h1>
      </div>
    </header>
    <main>
      <section class="profile-section">
        <h2>Welcome to Your Profile!</h2>
        <div id="profile-info">
          <!-- User information will be dynamically loaded here -->
        </div>
        <p><a href="index.html">Go to Home</a></p>
      </section>
    </main>
    <!-- Add any necessary JavaScript files -->
    <!-- <script src="js/profile_script.js" defer></script> -->
  </body>
</html>
